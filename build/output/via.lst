ca65 V2.18 - Debian 2.19-1
Main file   : source/via.s
Current file: source/via.s

000000r 1               ;PURPOSE - defines the static register references for the via interface as provided by Ben Eater's videos https://eater.net/6502
000000r 1               ;
000000r 1               ;This file was based on https://github.com/dbuchwald/cc65-tools/blob/main/tutorial/03_blink/blink.s (aside from the comments)
000000r 1               ;
000000r 1               ;This first bit is important. It issues cc65 magic to get the start address of the VIA memory block defined in firmware.cfg
000000r 1               ;Seeing the pattern? By defining memory spaces and static addresses in firmware.cfg, the rest of the code doesn't need to be aware
000000r 1               ;of the actual static values
000000r 1               
000000r 1               .segment "VIA_SEGMENT"
000000r 1               
000000r 1                 .import __VIA_START__
000000r 1               
000000r 1                 .export VIA_PORTB
000000r 1                 .export VIA_PORTA
000000r 1                 .export VIA_DDRB
000000r 1                 .export VIA_DDRA
000000r 1                 .export VIA_T1CL
000000r 1                 .export VIA_T1CH
000000r 1                 .export VIA_T1LL
000000r 1                 .export VIA_T1LH
000000r 1                 .export VIA_T2CL
000000r 1                 .export VIA_T2CH
000000r 1                 .export VIA_SR
000000r 1                 .export VIA_ACR
000000r 1                 .export VIA_PCR
000000r 1                 .export VIA_IFR
000000r 1                 .export VIA_IER
000000r 1                 .export VIA_PANH
000000r 1               
000000r 1               VIA_REGISTER_PORTB = $00
000000r 1               VIA_REGISTER_PORTA = $01
000000r 1               VIA_REGISTER_DDRB  = $02
000000r 1               VIA_REGISTER_DDRA  = $03
000000r 1               VIA_REGISTER_T1CL  = $04
000000r 1               VIA_REGISTER_T1CH  = $05
000000r 1               VIA_REGISTER_T1LL  = $06
000000r 1               VIA_REGISTER_T1LH  = $07
000000r 1               VIA_REGISTER_T2CL  = $08
000000r 1               VIA_REGISTER_T2CH  = $09
000000r 1               VIA_REGISTER_SR    = $0a
000000r 1               VIA_REGISTER_ACR   = $0b
000000r 1               VIA_REGISTER_PCR   = $0c
000000r 1               VIA_REGISTER_IFR   = $0d
000000r 1               VIA_REGISTER_IER   = $0e
000000r 1               VIA_REGISTER_PANH  = $0f
000000r 1               
000000r 1               VIA_PORTB = __VIA_START__ + VIA_REGISTER_PORTB
000000r 1               VIA_PORTA = __VIA_START__ + VIA_REGISTER_PORTA
000000r 1               VIA_DDRB  = __VIA_START__ + VIA_REGISTER_DDRB
000000r 1               VIA_DDRA  = __VIA_START__ + VIA_REGISTER_DDRA
000000r 1               VIA_T1CL  = __VIA_START__ + VIA_REGISTER_T1CL
000000r 1               VIA_T1CH  = __VIA_START__ + VIA_REGISTER_T1CH
000000r 1               VIA_T1LL  = __VIA_START__ + VIA_REGISTER_T1LL
000000r 1               VIA_T1LH  = __VIA_START__ + VIA_REGISTER_T1LH
000000r 1               VIA_T2CL  = __VIA_START__ + VIA_REGISTER_T2CL
000000r 1               VIA_T2CH  = __VIA_START__ + VIA_REGISTER_T2CH
000000r 1               VIA_SR    = __VIA_START__ + VIA_REGISTER_SR
000000r 1               VIA_ACR   = __VIA_START__ + VIA_REGISTER_ACR
000000r 1               VIA_PCR   = __VIA_START__ + VIA_REGISTER_PCR
000000r 1               VIA_IFR   = __VIA_START__ + VIA_REGISTER_IFR
000000r 1               VIA_IER   = __VIA_START__ + VIA_REGISTER_IER
000000r 1               VIA_PANH  = __VIA_START__ + VIA_REGISTER_PANH
000000r 1               
000000r 1  EA           nop
000001r 1  EA           nop
000002r 1  EA           nop
000002r 1               
